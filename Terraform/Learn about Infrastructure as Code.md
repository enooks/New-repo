# Learn about Infrastructure as Code (IaC)

> Terraformμ€ μ‚¬λκ³Ό κΈ°κ³„κ°€ μ½μ„ μ μλ” μ½”λ“λ΅ μΈν”„λΌλ¥Ό μ •μν•  μ μλ” λ„κµ¬
> 

λ€κ·λ¨ λ¶„μ‚° μ‹μ¤ν…, ν΄λΌμ°λ“ λ„¤μ΄ν‹°λΈ μ• ν”λ¦¬μΌ€μ΄μ…, μ„λΉ„μ¤ κΈ°λ° μ•„ν‚¤ν…μ²λ¥Ό κ΄€λ¦¬ν•κΈ° μ„ν•΄

β€IaCβ€™ (Infrastructure as Code)λ¥Ό μ•μ•„λ³΄μ„Έμ”.

μ½”λ“λ΅μ„μ Infrastructureλ” κ·Έλν”½ μ‚¬μ©μ μΈν„°νμ΄μ¤λ‚, μλ™ λ…λ Ήμ¤„ μ¤ν¬λ¦½νΈ μ‹ν€€μ¤κ°€ μ•„λ‹

κµ¬μ„± νμΌλ΅ κ΄€λ¦¬λ¥Ό ν•λ‹¤. (main.tf?)

μ΄ λ°©μ‹μ„ μ‚¬μ©ν•λ©΄ λ²„μ „κ΄€λ¦¬, μ¬μ‚¬μ©, κ³µμ ν•  μ μλ” λ¦¬μ†μ¤ κµ¬μ„±μ„ μ •μν•μ—¬ μ•μ „ν•κ³  μΌκ΄€μ„±μκ³ 

μ¶”μ  κ°€λ¥ν•λ©° λ°λ³µ κ°€λ¥ν• λ°©μ‹μΌλ΅ μΈν”„λΌλ¥Ό κµ¬μ¶•, λ³€κ²½, κ΄€λ¦¬ ν•  μ μλ‹¤.

<aside>
π’΅ μΈν”„λΌλ¥Ό κµ¬μ„± νμΌλ΅ κ΄€λ¦¬λ¥Ό ν•κ²λλ©΄ λ²„μ „κ΄€λ¦¬, μ¬μ‚¬μ©, κ³µμ λ¥Ό ν•  μ μμ
μ•μ „ν•κ³  μΌκ΄€μ„±, μ¶”μ , λ°λ³µ κ°€λ¥. μΈν”„λΌ κµ¬μ¶•, λ³€κ²½, κ΄€λ¦¬ κ°€λ¥.

</aside>

## Infrastructure as Code

What is it? Why is it important?

μΈν”„λΌλ” μ „ν†µμ μΌλ΅ μ–΄λ–»κ² κ΄€λ¦¬λκ³  μλ‚μ”?

ν”„λΌμ΄λΉ— λ°μ΄ν„°μ„Όν„° λ‚΄λ¶€μ—μ„ μ‹¤ν–‰λλ” VMwareμ™€ κ°™μ€ κΈ°μ΅΄ μΈν”„λΌλ¥Ό μ‚΄ν΄λ΄…λ‹λ‹¤. 

κ³ μ „μ μΈ μ ‘κ·Ό λ°©μ‹μ€ λ‹¤μκ³Ό κ°™μµλ‹λ‹¤: 

μΈν”„λΌ μ†λΉ„μμΈ μ κ°€ ν‹°μΌ“μ„ μ μ¶ν•λ©΄ ν‹°μΌ“ λ€κΈ°μ—΄μ λ‹¤λ¥Έ μ½ λμ— μλ” λ„κµ°κ°€κ°€ ν‹°μΌ“μ„ κ°€μ Έμ™€μ„ κ΄€λ¦¬ ν¬ν„Έμ΄λ‚ κ΄€λ¦¬ μ½μ†”μ— λ΅κ·ΈμΈν• ν›„ ν•΄λ‹Ή μΈν”„λΌλ¥Ό κ°€λ¦¬ν‚¤κ³  ν΄λ¦­ν•μ—¬ ν”„λ΅λΉ„μ €λ‹ν•λ” λ°©μ‹μ΄μ—μµλ‹λ‹¤.

μ΄λ° κ²½μ°λ” λ§μ€ μΈν”„λΌλ¥Ό κ΄€λ¦¬ν•  ν•„μ”κ°€ μ—†λ” κ²½μ°μ—λ” κ΄μ°®μ•μµλ‹λ‹¤.

λλ” μΈν”„λΌμ μ΄νƒμ΄ μƒλ€μ μΌλ΅ λ―Έλ―Έν• κ²½μ°μ€μµλ‹λ‹¤.

κ·Έλ¦¬κ³  μ΄λ” λ§μ€ ν”„λΌμ΄λΉ— λ°μ΄ν„°μ„Όν„°μ κ²½μ°μ€μµλ‹λ‹¤.

κ°€μƒ λ¨Έμ‹ μ€ μκ°μ›”μ—μ„ μλ…„ λ™μ• μ‚¬μ©λλ©°, λ°°ν¬ κ·λ¨κ°€ λΉ„κµμ  μ ν•μ μ΄μ—κΈ° λ•λ¬Έμ— μλ™μΌλ΅ μ‹μ¤ν…μ„ κ°€λ¦¬ν‚¤κ³  ν΄λ¦­ν•μ—¬ κ΄€λ¦¬ν•  μ μμ—μµλ‹λ‹¤.

μ΄μ  μ „ν™μ„ μ§„ν–‰ν•λ©΄μ„ λ‡ κ°€μ§€ μ£Όμ” λ³€κ²½ μ‚¬ν•­μ΄ μμµλ‹λ‹¤.

1. μ£Όλ΅ APIλ¥Ό κΈ°λ°μΌλ΅ ν•λ” ν΄λΌμ°λ“ ν™κ²½μΌλ΅ μ „ν™ν•κ³ μμµλ‹λ‹¤.
2. μΈν”„λΌμ νƒ„λ ¥μ„±μ΄ ν›¨μ”¬ λ†’μ•„μ Έ λ¦¬μ†μ¤μ μλ…μ΄ λ‡ κ°μ›”μ—μ„ λ‡ λ…„μ΄ μ•„λ‹λΌ λ©°μΉ μ—μ„ λ‡ μ£Όκ°€ λ  μ μμµλ‹λ‹¤.

μΈν”„λΌμ κ·λ¨κ°€ ν›¨μ”¬ λ” ν° μ΄μ λ” μ†μμ λ€κ·λ¨ μΈμ¤ν„΄μ¤ λ€μ‹ , λ‹¤μμ μ†κ·λ¨ μΈμ¤ν„΄μ¤κ°€ μμ„ μ μκΈ° λ•λ¬Έμ— ν”„λ΅λΉ„μ €λ‹ν•΄μ•Ό ν•  κ²ƒμ΄ ν›¨μ”¬ λ” λ§μΌλ©°, μ΄λ¬ν• μΈν”„λΌλ” μ£ΌκΈ°μ μΈ κ²½ν–¥μ΄ μκΈ° λ•λ¬Έμ…λ‹λ‹¤.

νΈλν”½μ΄ λ§μ€ λ‚®μ—λ” λ¶€ν•λ¥Ό μ²λ¦¬ν•κΈ° μ„ν•΄ ν™•μ¥ν–λ‹¤κ°€ λ°¤μ—λ” κ³ μ • λΉ„μ©μ΄ μ•„λ‹κΈ° λ•λ¬Έμ— λΉ„μ©μ„ μ κ°ν•κΈ° μ„ν•΄ μ¶•μ†ν•  μ μμµλ‹λ‹¤. κ°κ°€μƒκ°μ΄ κ°€λ¥ν• ν•λ“μ›¨μ–΄λ¥Ό μ†μ ν•λ” κ²ƒκ³Ό λ‹¬λ¦¬ μ΄μ λ” μ‹κ°„ λ‹¨μ„λ΅ λΉ„μ©μ„ μ§€λ¶ν•©λ‹λ‹¤. λ”°λΌμ„ ν•„μ”ν• μΈν”„λΌλ§ μ‚¬μ©ν•λ” κ²ƒμ΄ ν•©λ¦¬μ μ΄λ©°, μ΄λ¬ν• νƒ„λ ¥μ„±μ„ ν™•λ³΄ν•΄μ•Ό ν•©λ‹λ‹¤.

λ”°λΌμ„ μ΄λ¬ν• λ³€κ²½μ„ μ‹μ‘ν•λ©΄ κ°‘μκΈ° λ¨λ“  κ²ƒμ΄ λ‹¬λΌμ§‘λ‹λ‹¤. "λ§¤μΌ μ•„μΉ¨ μ² κ°μ ν‹°μΌ“μ„ μ μ¶ν•μ—¬ μµλ€ μ©λ‰κΉμ§€ λλ¦° λ‹¤μ λ°¤μ— λ‹¤μ‹ μ² κ°μ ν‹°μΌ“μ„ μ μ¶ν•μ—¬ λ‹¤μ‹ λλ¦° λ‹¤μ μ΄ λ¨λ“  κ²ƒμ„ μλ™μΌλ΅ κ΄€λ¦¬ν•΄μ•Ό ν•λ‹¤"λ” μƒκ°μ€ λ¶„λ… μ–΄λ ¤μ΄ μΌμ΄ λκΈ° μ‹μ‘ν•©λ‹λ‹¤: μ–΄λ–»κ² ν•λ©΄ μ•μ •μ μ΄κ³  κ²¬κ³ ν•λ©° μ‚¬λμ μ‹¤μκ°€ λ°μƒν•μ§€ μ•λ” λ°©μ‹μΌλ΅ μ΄λ¥Ό μ΄μν•  μ μμ„κΉμ”?

μΈν”„λΌμ μ—­λ™μ„± μΈ΅λ©΄μ—μ„ λ³€ν™”κ°€ μΌμ–΄λ‚κ³  μμµλ‹λ‹¤. λ”°λΌμ„ μ½”λ“λ΅μ„μ μΈν”„λΌμ— λ€ν• μ§„μ •ν• μ•„μ΄λ””μ–΄λ” λ‹¤μκ³Ό κ°™μµλ‹λ‹¤: μ–΄λ–¤ μλ―Έμ—μ„ μ°λ¦¬κ°€ κ°€λ¦¬ν‚¤κ³  ν΄λ¦­ν•΄μ„ λ‹¬μ„±ν•λ ν”„λ΅μ„Έμ¤λ¥Ό μ–΄λ–»κ² ν•λ©΄ μ½”λ“ν™”λ λ°©μ‹μΌλ΅ μΊ΅μ²ν•  μ μμ„κΉμ”? κ·Έλμ„ μ΄ μ‘μ—…μ„ ν• λ², μ—΄ λ², μ² λ² λ°λ³µν•΄μ•Ό ν•λ” κ²½μ° μ΄λ¥Ό μλ™ν™”ν•  μ μμµλ‹λ‹¤. λ§¤μΌ μ•„μΉ¨μ—λ” μ² λ€μ λ¨Έμ‹ μ„ λ¶λ¬μ¤λ” μ¤ν¬λ¦½νΈλ¥Ό μ‹¤ν–‰ν•κ³ , λ§¤μΌ μ €λ…μ—λ” κ°™μ€ μ¤ν¬λ¦½νΈλ¥Ό μ‹¤ν–‰ν•μ—¬ μ €λ…μ— μ›ν•λ” ν¬κΈ°λ΅ λ‹¤μ‹ μ¶•μ†ν•  μ μμµλ‹λ‹¤.

μ΄ μ‘μ—…μ„ μλ™ν™”ν•  μ μμ„ λΏλ§ μ•„λ‹λΌ μ½”λ“ν™”λ μ–‘μ‹μΌλ΅ μΊ΅μ²ν–μΌλ‹ λ²„μ „ κ΄€λ¦¬μ—μ„ ν™•μΈν•  μ μκ³  λ²„μ „ κ΄€λ¦¬λ„ ν•  μ μμµλ‹λ‹¤. μ΄μ  λ„κ°€ λ¬΄μ—‡μ„ λ³€κ²½ν–λ”μ§€, νΉμ • μ‹μ μ— μΈν”„λΌκ°€ μ‹¤μ λ΅ μ–΄λ–»κ² μ •μλμ—λ”μ§€ μ μ§„μ μΈ μ΄λ ¥μ„ ν™•μΈν•  μ μμΌλ©°, κΈ°μ΅΄μ ν¬μΈνΈ μ•¤ ν΄λ¦­ ν™κ²½μ—μ„λ” λ¶€μ΅±ν–λ λ¬Έμ„ν™” ν¬λ…μ„±μ„ ν™•λ³΄ν•  μ μκ² λμ—μµλ‹λ‹¤. μ •λ§ κµ¬μ „μΌλ΅ λ‚΄λ ¤μ¤λ” μ „ν†µμ΄μ£ : κµ¬μ„±μ€ μ–΄λ–»κ² λλ‚μ”? λ¬΄μ—‡μ„ κ°€λ¦¬ν‚¤κ³  ν΄λ¦­ν•΄μ„ μ„¤μ •ν•΄μ•Ό ν•λ”κ°€?

## Introduce to IaC

How does Terraform work?

Terraformμ€ μ• ν”λ¦¬μΌ€μ΄μ… ν”„λ΅κ·Έλλ° μΈν„°νμ΄μ¤(API)λ¥Ό ν†µν•΄ ν΄λΌμ°λ“ ν”λ«νΌ λ° κΈ°νƒ€ μ„λΉ„μ¤μ—μ„ λ¦¬μ†μ¤λ¥Ό μƒμ„±ν•κ³  κ΄€λ¦¬ν•©λ‹λ‹¤. μ κ³µμ—…μ²΄λ” μ ‘κ·Ό κ°€λ¥ν• APIλ¥Ό ν†µν•΄ κ±°μ λ¨λ“  ν”λ«νΌ λλ” μ„λΉ„μ¤μ—μ„ Terraformμ΄ μ‘λ™ν•  μ μλ„λ΅ μ§€μ›ν•©λ‹λ‹¤.

![image](https://github.com/enooks/new-repo/assets/104637797/c76bf111-60a5-4206-8e5a-dae9c69776d5)

Hashicorpμ™€ ν…λΌνΌ μ»¤λ®¤λ‹ν‹°λ” μ΄λ―Έ λ‹¤μ–‘ν• μ ν•μ λ¦¬μ†μ¤μ™€ μ„λΉ„μ¤λ¥Ό κ΄€λ¦¬ν•κΈ° μ„ν•΄ μμ² κ°μ κ³µκΈ‰μλ¥Ό μ‘μ„±ν•΄μ™”μµλ‹λ‹¤. μ•„λ§μ΅΄ μ›Ή μ„λΉ„μ¤(AWS), μ• μ €, κµ¬κΈ€ ν΄λΌμ°λ“ ν”λ«νΌ(GCP), μΏ λ²„λ„¤ν‹°μ¤, ν—¬λ¦„, κΉƒν—λΈ, μ¤ν”λ ν¬, λ°μ΄ν„°λ… λ“± κ³µκ°μ μΌλ΅ μ‚¬μ© κ°€λ¥ν• λ¨λ“  κ³µκΈ‰μλ¥Ό ν…λΌνΌ λ μ§€μ¤νΈλ¦¬μ—μ„ μ°Ύμ„ μ μμµλ‹λ‹¤.

Terraformμ ν•µμ‹¬ μ›ν¬ν”λ΅μ°λ” μ„Έ λ‹¨κ³„λ΅ κµ¬μ„±λ©λ‹λ‹¤.

- **Write:** μ—¬λ¬ ν΄λΌμ°λ“ μ κ³µμ—…μ²΄ λ° μ„λΉ„μ¤μ— κ±Έμ³ μμ„ μ μλ” λ¦¬μ†μ¤λ¥Ό μ •μν•©λ‹λ‹¤. μλ¥Ό λ“¤μ–΄, λ³΄μ• κ·Έλ£Ήκ³Ό λ¶€ν• λ¶„μ‚° μ¥μΉκ°€ μλ” κ°€μƒ μ‚¬μ„¤ ν΄λΌμ°λ“(VPC) λ„¤νΈμ›ν¬μ κ°€μƒ λ¨Έμ‹ μ— μ• ν”λ¦¬μΌ€μ΄μ…μ„ λ°°ν¬ν•λ” κµ¬μ„±μ„ λ§λ“¤ μ μμµλ‹λ‹¤.
- **Plan:** Terraformμ€ κΈ°μ΅΄ μΈν”„λΌμ™€ μ‚¬μ©μ κµ¬μ„±μ„ κΈ°λ°μΌλ΅ μƒμ„±, μ—…λ°μ΄νΈ λλ” νκΈ°ν•  μΈν”„λΌλ¥Ό μ„¤λ…ν•λ” μ‹¤ν–‰ κ³„νμ„ μƒμ„±ν•©λ‹λ‹¤.
- **Apply:** μΉμΈμ„ λ°›μΌλ©΄ Terraformμ€ λ¨λ“  λ¦¬μ†μ¤ μΆ…μ†μ„±μ„ κ³ λ ¤ν•μ—¬ μ μ•λ μ‘μ—…μ„ μ¬λ°”λ¥Έ μμ„λ΅ μν–‰ν•©λ‹λ‹¤. μλ¥Ό λ“¤μ–΄, VPCμ μ†μ„±μ„ μ—…λ°μ΄νΈν•κ³  ν•΄λ‹Ή VPCμ κ°€μƒ λ¨Έμ‹  μλ¥Ό λ³€κ²½ν•λ” κ²½μ°, Terraformμ€ κ°€μƒ λ¨Έμ‹ μ„ ν™•μ¥ν•κΈ° μ „μ— VPCλ¥Ό λ‹¤μ‹ μƒμ„±ν•©λ‹λ‹¤.

[assets.avif](Learn%20about%20Infrastructure%20as%20Code%20(IaC)%2012452e103af8426eb9633fde6531d694/assets%201.avif)

### λ¨λ“  μΈν”„λΌ κ΄€λ¦¬

μ΄λ―Έ μ‚¬μ© μ¤‘μΈ λ§μ€ ν”λ«νΌκ³Ό μ„λΉ„μ¤μ— λ€ν• μ κ³µμλ¥Ό Terraform λ μ§€μ¤νΈλ¦¬μ—μ„ μ°Ύμ„ μ μμµλ‹λ‹¤. μ§μ ‘ μ‘μ„±ν•  μλ„ μμµλ‹λ‹¤. Terraformμ€ μΈν”„λΌμ— λ€ν•΄ λ¶λ³€μ μ ‘κ·Ό λ°©μ‹μ„ μ·¨ν•λ―€λ΅ μ„λΉ„μ¤ λ° μΈν”„λΌλ¥Ό μ—…κ·Έλ μ΄λ“ν•κ±°λ‚ μμ •ν•λ” λ° λ”°λ¥΄λ” λ³µμ΅μ„±μ„ μ¤„μ—¬μ¤λ‹λ‹¤.

### μΈν”„λΌ μ¶”μ 

Terraformμ€ μΈν”„λΌλ¥Ό μμ •ν•κΈ° μ „μ— κ³„νμ„ μƒμ„±ν•κ³  μ‚¬μ©μμ—κ² μΉμΈμ„ μ”μ²­ν•λ” λ©”μ‹μ§€λ¥Ό ν‘μ‹ν•©λ‹λ‹¤. λν• μ‹¤μ  μΈν”„λΌλ¥Ό μƒνƒ νμΌμ— μ¶”μ ν•μ—¬ μ‚¬μ©μ ν™κ²½μ— λ€ν• μ‹ λΆ°ν•  μ μλ” μ†μ¤ μ—­ν• μ„ ν•©λ‹λ‹¤. Terraformμ€ μƒνƒ νμΌμ„ μ‚¬μ©ν•μ—¬ μΈν”„λΌκ°€ μ‚¬μ©μμ κµ¬μ„±κ³Ό μΌμΉν•λ„λ΅ λ³€κ²½ν•  μ‚¬ν•­μ„ κ²°μ •ν•©λ‹λ‹¤.

### λ³€κ²½ μ‚¬ν•­ μλ™ν™”

Terraform κµ¬μ„± νμΌμ€ μ„ μ–Έμ  νμΌλ΅, μΈν”„λΌμ μµμΆ… μƒνƒλ¥Ό μ„¤λ…ν•©λ‹λ‹¤. Terraformμ΄ κΈ°λ³Έ λ΅μ§μ„ μ²λ¦¬ν•λ―€λ΅ λ¦¬μ†μ¤λ¥Ό μƒμ„±ν•κΈ° μ„ν•΄ λ‹¨κ³„λ³„ μ§€μΉ¨μ„ μ‘μ„±ν•  ν•„μ”κ°€ μ—†μµλ‹λ‹¤. Terraformμ€ λ¦¬μ†μ¤ κ·Έλν”„λ¥Ό κµ¬μ¶•ν•μ—¬ λ¦¬μ†μ¤ μΆ…μ†μ„±μ„ κ²°μ •ν•κ³  μΆ…μ†λμ§€ μ•μ€ λ¦¬μ†μ¤λ¥Ό λ³‘λ ¬λ΅ μƒμ„±ν•κ±°λ‚ μμ •ν•©λ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ Terraformμ€ λ¦¬μ†μ¤λ¥Ό ν¨μ¨μ μΌλ΅ ν”„λ΅λΉ„μ €λ‹ν•  μ μμµλ‹λ‹¤.

### κµ¬μ„± ν‘μ¤€ν™”

Terraformμ€ κµ¬μ„± κ°€λ¥ν• μΈν”„λΌ λ¨μμ„ μ •μν•λ” λ¨λ“μ΄λΌκ³  ν•λ” μ¬μ‚¬μ© κ°€λ¥ν• κµ¬μ„± κµ¬μ„± μ”μ†λ¥Ό μ§€μ›ν•μ—¬ μ‹κ°„μ„ μ μ•½ν•κ³  λ¨λ²” μ‚¬λ΅€λ¥Ό μ¥λ ¤ν•©λ‹λ‹¤. Terraform λ μ§€μ¤νΈλ¦¬([registry.terraform.io](https://registry.terraform.io/))μ—μ„ κ³µκ°μ μΌλ΅ μ‚¬μ© κ°€λ¥ν• λ¨λ“μ„ μ‚¬μ©ν•κ±°λ‚ μ§μ ‘ μ‘μ„±ν•  μ μμµλ‹λ‹¤.

### κ³µλ™ μ‘μ—…

κµ¬μ„±μ΄ νμΌλ΅ μ‘μ„±λλ―€λ΅ λ²„μ „ κ΄€λ¦¬ μ‹μ¤ν…(VCS)μ— μ»¤λ°‹ν•κ³  Terraform Cloudλ¥Ό μ‚¬μ©ν•μ—¬ ν€ μ „μ²΄μ—μ„ Terraform μ›ν¬ν”λ΅λ¥Ό ν¨μ¨μ μΌλ΅ κ΄€λ¦¬ν•  μ μμµλ‹λ‹¤. Terraform Cloudλ” μΌκ΄€λκ³  μ•μ •μ μΈ ν™κ²½μ—μ„ Terraformμ„ μ‹¤ν–‰ν•λ©° κ³µμ  μƒνƒ λ° λΉ„λ°€ λ°μ΄ν„°μ— λ€ν• μ•μ „ν• μ•΅μ„Έμ¤, μ—­ν•  κΈ°λ° μ•΅μ„Έμ¤ μ μ–΄, λ¨λ“κ³Ό κ³µκΈ‰μλ¥Ό λ¨λ‘ κ³µμ ν•κΈ° μ„ν• λΉ„κ³µκ° λ μ§€μ¤νΈλ¦¬ λ“±μ„ μ κ³µν•©λ‹λ‹¤.

### Introduction to Infrastructure as Code with Terraform

![Untitled](Learn%20about%20Infrastructure%20as%20Code%20(IaC)%2012452e103af8426eb9633fde6531d694/Untitled.png)

TerraformμΌλ΅ μΈν”„λΌλ¥Ό λ°°ν¬:

- **Scope:** ν”„λ΅μ νΈμ μΈν”„λΌλ¥Ό μ‹λ³„ν•©λ‹λ‹¤.
- **Author:** μΈν”„λΌμ— λ€ν• κµ¬μ„±μ„ μ‘μ„±ν•©λ‹λ‹¤.
- **Initialize:** Terraformμ΄ μΈν”„λΌλ¥Ό κ΄€λ¦¬ν•λ” λ° ν•„μ”ν• ν”λ¬κ·ΈμΈμ„ μ„¤μΉν•©λ‹λ‹¤.
- **Plan:** κµ¬μ„±μ— λ§κ² Terraformμ΄ μν–‰ν•  λ³€κ²½ μ‚¬ν•­μ„ λ―Έλ¦¬ λ΄…λ‹λ‹¤.
- **Apply:** κ³„νν• λ³€κ²½ μ‚¬ν•­μ„ μ μ©ν•©λ‹λ‹¤.

### Terraform Use Cases

ν•΄μ‹μ½”ν”„ ν…λΌνΌμ€ μ‚¬λμ΄ μ½μ„ μ μλ” κµ¬μ„± νμΌλ΅ μΈν”„λΌ λ¦¬μ†μ¤λ¥Ό μ •μν•μ—¬ λ²„μ „ κ΄€λ¦¬, μ¬μ‚¬μ©, κ³µμ ν•  μ μλ” μ½”λ“ν• μΈν”„λΌ λ„κµ¬μ…λ‹λ‹¤. κ·Έλ° λ‹¤μ μΌκ΄€λ μ›ν¬ν”λ΅λ¥Ό μ‚¬μ©ν•΄ μΈν”„λΌμ μλ… μ£ΌκΈ° λ‚΄λ‚΄ μΈν”„λΌλ¥Ό μ•μ „ν•κ³  ν¨μ¨μ μΌλ΅ ν”„λ΅λΉ„μ €λ‹ν•κ³  κ΄€λ¦¬ν•  μ μμµλ‹λ‹¤.

### Multi-Cloud Deployment

μ—¬λ¬ ν΄λΌμ°λ“μ— κ±Έμ³ μΈν”„λΌλ¥Ό ν”„λ΅λΉ„μ €λ‹ν•λ©΄ ***λ‚΄κ²°ν•¨μ„±(fault-tolerance)**μ΄ ν–¥μƒλμ–΄ ν΄λΌμ°λ“ μ„λΉ„μ¤ μ κ³µμ—…μ²΄μ μ¤‘λ‹¨μΌλ΅λ¶€ν„° λ³΄λ‹¤ μ›ν™ν•κ² λ³µκµ¬ν•  μ μμµλ‹λ‹¤. ν•μ§€λ§ λ©€ν‹°ν΄λΌμ°λ“ λ°°ν¬λ” κ° μ κ³µμ—…μ²΄λ§λ‹¤ κ³ μ ν• μΈν„°νμ΄μ¤, λ„κµ¬, μ›ν¬ν”λ΅μ°λ¥Ό κ°€μ§€κ³  μκΈ° λ•λ¬Έμ— λ³µμ΅μ„±μ΄ μ¦κ°€ν•©λ‹λ‹¤. Terraformμ„ μ‚¬μ©ν•λ©΄ λ™μΌν• μ›ν¬ν”λ΅λ¥Ό μ‚¬μ©ν•μ—¬ μ—¬λ¬ κ³µκΈ‰μλ¥Ό κ΄€λ¦¬ν•κ³  ν΄λΌμ°λ“ κ°„ μΆ…μ†μ„±μ„ μ²λ¦¬ν•  μ μμµλ‹λ‹¤. λ”°λΌμ„ λ€κ·λ¨ λ©€ν‹°ν΄λΌμ°λ“ μΈν”„λΌμ— λ€ν• κ΄€λ¦¬μ™€ μ¤μΌ€μ¤νΈλ μ΄μ…μ΄ κ°„μ†ν™”λ©λ‹λ‹¤.

<aside>
π’΅ ***μ‹μ¤ν…μ΄ ν•λ“μ›¨μ–΄ λλ” μ†ν”„νΈμ›¨μ–΄μ μ¤λ¥, μ¥μ•  λλ” κ³ μ¥μ—λ„ κ³„μ†ν•΄μ„ μ •μƒμ μΌλ΅ λ™μ‘ν•λ” λ¥λ ¥μ„ μλ―Έν•λ‹¤. μ¦‰, μ‹μ¤ν…μ΄ μΌμ‹μ μΈ μ¥μ• λ‚ μ¤λ¥λ¥Ό κ°μ§€ν•κ³  λ³µκµ¬ν•  μ μλ” λ¥λ ¥μ„ κ°€μ§€κ³ μλ‹¤. κ³ κ°€μ©μ„±(High-Availability)κ³Ό λΉ„μ·?
μμ‹) ν΄λ¬μ¤ν„°λ§, RAID**

</aside>

### **Application Infrastructure Deployment, Scaling, and Monitoring Tools**

Terraformμ„ μ‚¬μ©ν•λ©΄ λ©€ν‹° ν‹°μ–΄ μ• ν”λ¦¬μΌ€μ΄μ…μ„ μ„ν• μΈν”„λΌλ¥Ό ν¨μ¨μ μΌλ΅ λ°°ν¬, λ¦΄λ¦¬μ¤, ν™•μ¥, λ¨λ‹ν„°λ§ν•  μ μμµλ‹λ‹¤. N-ν‹°μ–΄ μ• ν”λ¦¬μΌ€μ΄μ… μ•„ν‚¤ν…μ²λ¥Ό μ‚¬μ©ν•λ©΄ μ• ν”λ¦¬μΌ€μ΄μ… κµ¬μ„± μ”μ†λ¥Ό λ…λ¦½μ μΌλ΅ ν™•μ¥ν•  μ μμΌλ©° μ°λ ¤ μ‚¬ν•­μ„ λ¶„λ¦¬ν•  μ μμµλ‹λ‹¤. μ• ν”λ¦¬μΌ€μ΄μ…μ€ λ°μ΄ν„°λ² μ΄μ¤ ν‹°μ–΄λ¥Ό μ‚¬μ©ν•λ” μ›Ή μ„λ²„ ν’€κ³Ό API μ„λ²„, μΊμ‹± μ„λ²„, λΌμ°ν… λ©”μ‹λ¥Ό μ„ν• μ¶”κ°€ ν‹°μ–΄λ΅ κµ¬μ„±λ  μ μμµλ‹λ‹¤. Terraformμ„ μ‚¬μ©ν•λ©΄ κ° κ³„μΈµμ λ¦¬μ†μ¤λ¥Ό ν•¨κ» κ΄€λ¦¬ν•  μ μμΌλ©°, κ³„μΈµ κ°„μ μΆ…μ†μ„±μ„ μλ™μΌλ΅ μ²λ¦¬ν•  μ μμµλ‹λ‹¤. μλ¥Ό λ“¤μ–΄, Terraformμ€ λ°μ΄ν„°λ² μ΄μ¤ ν‹°μ–΄λ¥Ό λ°°ν¬ν• ν›„ μ΄μ— μμ΅΄ν•λ” μ›Ή μ„λ²„λ¥Ό ν”„λ΅λΉ„μ €λ‹ν•©λ‹λ‹¤.

### **Use Application Load Balancers for blue-green and canary deployments**

## Terraform Tutorial (Use case)

λΈ”λ£¨κ·Έλ¦° λ°°ν¬μ™€ λ΅¤λ§ λ°°ν¬(μΉ΄λ‚λ¦¬μ•„ ν…μ¤νΈ)λ¥Ό μ‚¬μ©ν•λ©΄ μƒ μ†ν”„νΈμ›¨μ–΄λ¥Ό μ μ§„μ μΌλ΅ λ¦΄λ¦¬μ¤ν•μ—¬ μ†ν”„νΈμ›¨μ–΄ λ¦΄λ¦¬μ¤ μ‹¤ν¨λ΅ μΈν• μ μ¬μ  μν–¥ λ°κ²½μ„ μ¤„μΌ μ μμµλ‹λ‹¤. μ΄ μ›ν¬ν”λ΅λ¥Ό μ‚¬μ©ν•λ©΄ λ‹¤μ΄νƒ€μ„μ΄ κ±°μ μ—†μ΄ μ†ν”„νΈμ›¨μ–΄ μ—…λ°μ΄νΈλ¥Ό κ²μ‹ν•  μ μμµλ‹λ‹¤. (λ¬΄μ¤‘λ‹¨λ°°ν¬)

- Blue-Green Deplyment Background
    
    
    In a blue-green deployment, the current service deployment acts as theΒ **blue**Β environment. When you are ready to release an update, you deploy the new service version and underlying infrastructure into a newΒ **green**Β environment. After verifying the green deployment, you redirect traffic from the blue environment to the green one.
    
    This workflow lets you:
    
    1. Test the green environment and identify any errors before promoting it. Your configuration still routes traffic to the blue environment while you test, ensuring near-zero downtime.
    2. Easily roll back to the previous deployment in the event of errors by redirecting all traffic back to the blue environment.
    
    ![Untitled](Learn%20about%20Infrastructure%20as%20Code%20(IaC)%2012452e103af8426eb9633fde6531d694/Untitled%201.png)
    
    κΈ°μ΅΄ μ΄μν•λ ν™κ²½(Blue)μ—μ„ μ—…κ·Έλ μ΄λ“ ν™κ²½(Green)μΌλ΅ λ²„μ „μ—… ν• λ•
    Load Balancerμ—μ„ Blueλ΅ ν–¥ν•λ” νΈλν”½μ„ GreenμΌλ΅ λ³€κ²½ν•΄μ£Όλ” μ‘μ—…μ„ λΈ”λ£¨-κ·Έλ¦° λ°°ν¬λΌν•λ‹¤.
    

In this tutorial, you will use Terraform to:

1. Provision networking resources (VPC, security groups, load balancers) and a set of web servers to serve as the blue environment.
2. Provision a second set of web servers to serve as the green environment.
3. Add feature toggles to your Terraform configuration to define a list of potential deployment strategies.
4. Use feature toggles to conduct a canary test and incrementally promote your green environment.

### Prerequisites (μ „μ  μ΅°κ±΄)

- Terraform 1.3+ installed locally
- an AWS account

### **Review example configuration (κµ¬μ„± μμ‹ κ²€ν† )**

Clone theΒ [Learn Terraform Advanced Deployment Strategies](https://github.com/hashicorp/learn-terraform-advanced-deployments)Β repository

```bash
git clone https://github.com/hashicorp/learn-terraform-advanced-deployments.git
```

Navigate to the repository directory in your terminal.

```bash
cd learn-terraform-advanced-deployments
```

This repository contains multiple Terraform configuration files:

1. `main.tf`Β defines the VPC, security groups, and load balancers.
2. `variables.tf`Β defines variables used by the configuration such as region, CIDR blocks, number of subnets, etc.
3. `blue.tf`Β defines 2 AWS instances that run a user data script to start a web server. These instances represent "version 1.0" of the example service.
4. `init-script.sh`Β contains the script to start the web server.
5. `terraform.tf`Β defines theΒ `terraform`Β block, which specifies the Terraform binary and AWS provider versions.
6. `.terraform.lock.hcl`Β is the TerraformΒ [dependency lock file](https://developer.hashicorp.com/terraform/tutorials/configuration-language/provider-versioning).

### Review `main.tf`

μ΄ νμΌμ—λ” AWS providerλ¥Ό μ‚¬μ©ν•μ—¬ VPC, subnet, application security group, load balancer security groupμ„ λ°°ν¬ ν•λ‹¤.

μ΄ κµ¬μ„±μ€ ALBλ¥Ό λ‚νƒ€λ‚΄λ” aws_lb λ¦¬μ†μ¤λ¥Ό μ •μν•©λ‹λ‹¤. λ΅λ“ λ°Έλ°μ„κ°€ μ”μ²­μ„ λ°›μΌλ©΄ aws_lb_listener.appμ— μ •μλ λ¦¬μ¤λ„ κ·μΉ™μ„ ν‰κ°€ν•κ³  νΈλν”½μ„ μ μ ν• λ€μƒ κ·Έλ£ΉμΌλ΅ λΌμ°ν…ν•©λ‹λ‹¤.

Error

```bash
[root@Terraform-test learn-terraform-advanced-deployments]# terraform init

Initializing the backend...
Initializing modules...
β•·
β”‚ Error: Unsupported Terraform Core version
β”‚
β”‚   on terraform.tf line 17, in terraform:
β”‚   17:   required_version = "~> 1.3.0"
β”‚
β”‚ This configuration does not support Terraform version 1.6.4. To proceed, either choose another supported Terraform version or update this
β”‚ version constraint. Version constraints are normally set for good reason, so updating the constraint may lead to other errors or unexpected
β”‚ behavior.
β•µ
```

ν„μ¬ λ²„μ „μ€ v1.6.4 λ²„μ „μ΄μ–΄μ„ λ²„μ „ λ¬Έμ μΈκ°€ν•΄μ„ terraform μ‚­μ  ν›„ μ¬μ„¤μΉ ν•΄λ³΄μ•μ§€λ§ κ°™μ€ μ¤λ¥ λ°μƒ.

[terraform.tf](http://terraform.tf) νμΌμ required_version = β€~> 1.3.0β€ μ„ β€~> 1.6.0β€μΌλ΅ λ³€κ²½ ν›„ μ •μƒ ν™•μΈ.

μλ¬Έμ μ€ ~> 1.3.0μ€ 1.3.0 μ΄μƒ 2.0.0 λ―Έλ§μ λ²„μ „μ„ ν¬ν•¨μ‹ν‚¤λ” κ±΄λ° μ™ 1.6.4 λ²„μ „μ΄ μ•λλ”μ§€ μλ¬Έ.. μ°Ύμ•„λ΄μ•Όκ² λ‹¤.
